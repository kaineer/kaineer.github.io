<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Тег: octopress | Caramel sepulcrum]]></title>
  <link href="http://kaineer.github.io/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://kaineer.github.io/"/>
  <updated>2015-12-23T15:28:53+05:00</updated>
  <id>http://kaineer.github.io/</id>
  <author>
    <name><![CDATA[Tangerine Cat]]></name>
    <email><![CDATA[kaineer@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Пилим linkify tweet]]></title>
    <link href="http://kaineer.github.io/blog/2011/08/09/pilim_linkify/"/>
    <updated>2011-08-09T10:02:00+06:00</updated>
    <id>http://kaineer.github.io/blog/2011/08/09/pilim_linkify</id>
    <content type="html"><![CDATA[<p>Допилил октопрессовский <code>twitter.js</code>, теперь в импортированных твитах
выделяются тэги с кириллицей.</p>

<!-- more -->


<p>Вкратце, в регекспах, выбирающих тэги в твитах заменил <code>(\w+)</code> на
<code>([\wа-яА-ЯёЁ]+)</code>. Для тех, кто не любит ковыряться в коде, полный вариант
исходной и заменённой функции:</p>

<p><figure class='code'><figcaption><span>До допиливания - twitter.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">linkifyTweet</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(https?:\/\/)([\w-:;?&amp;amp;=+.%#\/]+)/gi</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">lsquo</span><span class="p">;</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;$1$2&quot;</span><span class="o">&gt;</span><span class="nx">$2</span><span class="o">&lt;</span><span class="err">/a&gt;&amp;rsquo;)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^|\W)@(\w+)/g</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">lsquo</span><span class="p">;</span><span class="nx">$1</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://twitter.com/$2&quot;</span><span class="o">&gt;</span><span class="err">@</span><span class="nx">$2</span><span class="o">&lt;</span><span class="err">/a&gt;&amp;rsquo;)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^|\W)#(\w+)/g</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">lsquo</span><span class="p">;</span><span class="nx">$1</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://search.twitter.com/search?q=%23$2&quot;</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">$2</span><span class="o">&lt;</span><span class="err">/a&gt;&amp;rsquo;);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>После допиливания - twitter.js </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">linkifyTweet</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(https?:\/\/)([\w-:;?&amp;amp;=+.%#\/]+)/gi</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">lsquo</span><span class="p">;</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;$1$2&quot;</span><span class="o">&gt;</span><span class="nx">$2</span><span class="o">&lt;</span><span class="err">/a&gt;&amp;rsquo;)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^|\W)@([\wа-яА-ЯёЁ]+)/g</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">lsquo</span><span class="p">;</span><span class="nx">$1</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://twitter.com/$2&quot;</span><span class="o">&gt;</span><span class="err">@</span><span class="nx">$2</span><span class="o">&lt;</span><span class="err">/a&gt;&amp;rsquo;)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^|\W)#([\wа-яА-ЯёЁ]+)/g</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">lsquo</span><span class="p">;</span><span class="nx">$1</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://search.twitter.com/search?q=%23$2&quot;</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">$2</span><span class="o">&lt;</span><span class="err">/a&gt;&amp;rsquo;);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
</feed>
